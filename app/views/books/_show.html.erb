<div class="container">
    <% @books.each do |book| %>
        <div class="book <%=book.id%>" data-id=<%=book.id%>>

        <div class="ui card">
          <div class="content">
            <i class="right floated like icon"></i>
            <i class="right floated star icon"></i>
            <div class="header">Title: <%= book.title.capitalize%></div>
            <div class="meta">Author: <%= book.author.username%></div>

            <div class="description" data-id=<%=book.id%>>
              <div class="book-<%=book.id%>-desciption"></div>
             <button class="more-script-info">More Info</button>
            </div>
          </div>
          <div class="extra content">
            <span class="left floated like">
              <i class="like icon"></i>
              Like

            </span>
            <span class="right floated star">
              <i class="star icon"></i>
              Favorite
            </span>
          </div>
        </div>
        <%=book.id%>

                <div class="bottom-content">

          <div class="like">

              <div class="like-btn text-center" book_id="<%= book.id %>" author_id="<%=book.author.id%>">
                <p>Button</p>
                <span class=""></span>
              </div>

            <div class="likes-message"><%#= picture.likes_message(current_user) %></div>
          </div> <!-- end like -->



        </div> <!-- end bottom-content -->


    <%end%>

    </div>

    <br>
    <br>
<script type="text/javascript">
  $('.like-btn').click(function() {
      var $btn = $(this);
      var bookId = $btn.attr('book_id')
      var authorId = $btn.attr('author_id')


      function updateLikes($btn, results){
      $btn.parent().find('.likes-message').html("hi");
    }

       $.ajax({
          type: 'POST',
          data: { book_id: bookId, author_id: authorId },
          url:'/books/' +bookId+ '/interest',
          success: function(data){
            console.log(data)
            updateLikes($btn, data);
          }
        });
  })
</script>
 <!--   $('.like-btn').click(function(){
    var $btn = $(this);
    var pictureId = $btn.attr('picture_id');

    // this function toggles the heart button and updates the text (called after ajax success)
    function updateLikes($btn, results){
      $btn.find('span').toggleClass('grey-heart red-heart');
      $btn.parent().find('.likes-message').html(results.message);
    }

    // post request to the rails controller
    $.ajax({
      type: 'POST',
      url:'/picture/' +pictureId+ '/like',
      success: function(results){
        updateLikes($btn, results);
      }
    });

  }); -->
